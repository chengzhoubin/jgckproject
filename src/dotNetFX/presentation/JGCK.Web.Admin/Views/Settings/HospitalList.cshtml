@using JGCK.Util
@using Webdiyer.WebControls.Mvc
@model JGCK.Web.Admin.Models.VmHospitalIndex
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <a href="index.html">基础管理</a>
            <i class="fa fa-circle"></i>
        </li>
        <li>
            <span>医院管理</span>
        </li>
    </ul>
    <div class="page-toolbar">
        <div class="btn-group pull-right">
            <button type="button" class="btn green btn-sm btn-outline"> 新增 </button>
        </div>
    </div>
</div>
<!-- END PAGE BAR -->
<!-- BEGIN PAGE TITLE-->
<!--<h1 class="page-title"> Basic Bootstrap Tables-->
<!--<small>basic bootstrap tables with various options and styles</small>-->
<!--</h1>-->
<!-- END PAGE TITLE-->
<!-- END PAGE HEADER-->
<div class="row">
<div class="col-md-12">
    <!-- BEGIN SAMPLE TABLE PORTLET-->
    <div class="portlet light">
        <!--<div class="portlet-title">-->
        <!--<div class="caption font-dark">-->
        <!--<i class="icon-settings font-dark"></i>-->
        <!--<span class="caption-subject bold uppercase">医生列表</span>-->
        <!--</div>-->
        <!--<div class="tools"> </div>-->
        <!--</div>-->
        <div class="portlet-body">
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <!--<label>Small Input Default Group</label>-->
                            <div class="input-group input-group-sm">
                                @Html.TextBoxFor(m=>m.Filter,new{@class="form-control",placeholder= "医院编号、医院名称" })
                                <span class="input-group-btn">
                                    <button id="btnSearch" class="btn green" type="button">搜索</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table table-striped table-bordered table-hover dataTable" id="sample_1">
                    <thead>
                    <tr>
                        <th class="sorting_asc"> 序号 </th>
                        <th class="sorting"> 医院编号 </th>
                        <th class="sorting_desc"> 医院名称 </th>
                        <th> 医院属性 </th>
                        <th> 付款方式 </th>
                        <th class="sorting"> 付款周期 </th>
                        <th> 折扣系数 </th>
                        <th> 收件联系人 </th>
                        <th> 联系电话 </th>
                        <th> 操作 </th>
                    </tr>
                    </thead>
                    <tbody>
                    @if (Model?.ViewObjects != null)
                    {
                        var itemIndex = 1;
                        foreach (var item in Model.ViewObjects)
                        {
                            <tr>
                                <td> @(Model.CurrentIndex * Model.PageSize + itemIndex) </td>
                                <td> @item.NagigatedDomainObject.HCode </td>
                                <td> @item.NagigatedDomainObject.Name </td>
                                <td> @item.NagigatedDomainObject.HospitalType.ToDescription() </td>
                                <td> @item.NagigatedDomainObject.PaymentType.ToDescription() </td>
                                <td> @item.NagigatedDomainObject.PaymentPeriod.ToDescription() </td>
                                <td> @($"{item.NagigatedDomainObject.SaleRate:0.00}") </td>
                                <td> @item.NagigatedDomainObject.HospitalReferences?.FirstOrDefault()?.Receipter </td>
                                <td> @item.NagigatedDomainObject.HospitalReferences?.FirstOrDefault()?.ReceipterPhone </td>
                                <td> <button type="button" class="btn green btn-sm" onclick="$('#modelfull').modal('show')"> 操作 </button> </td>
                            </tr>
                            itemIndex++;
                        }
                    }
                    </tbody>
                </table>
                <div>
                    @Html.Pager(Model.TotalRecordCount, Model.PageSize, Model.CurrentIndex, new PagerOptions
                    {
                        PageIndexParameterName = "p",
                        ContainerTagName = "ul",
                        CssClass = "pagination pagination-sm",
                        CurrentPagerItemTemplate = "<li class=\"active\"><a href=\"javascript:; \"> {0} </a></li>",
                        DisabledPagerItemTemplate = "<li><a href=\"javascript:; \"> {0} </a></li>",
                        PagerItemTemplate = "<li>{0}</li>"
                    })
                </div>
            </div>
        </div>
        <!-- END SAMPLE TABLE PORTLET-->
    </div>
</div>




<div class="modal fade" id="modelfull" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-full">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">医院信息</h4>
            </div>
            <div class="modal-body">

                <div class="tabbable-line">
                    <ul class="nav nav-tabs ">
                        <li class="active">
                            <a href="#tab_15_1" data-toggle="tab"> 基本信息 </a>
                        </li>
                        <li>
                            <a href="#tab_15_2" data-toggle="tab"> 资质文件 </a>
                        </li>
                        <li>
                            <a href="#tab_15_3" data-toggle="tab"> 备注 </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_15_1">
                            <form action="#" class="horizontal-form">
                                <div class="form-body">
                                    <h3 class="form-section">基本信息</h3>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label class="control-label">医院编号*</label>
                                                <input type="text" id="hospitalNo" class="form-control" placeholder="医院编号">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group has-error">
                                                <label class="control-label">医院名称</label>
                                                <input type="text" id="hospitalName" class="form-control" placeholder="医院名称">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">医院地址</label>
                                                <input type="text" id="hospitalAddress" class="form-control" placeholder="医院地址">

                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label class="control-label">医院属性</label>
                                                <select class="form-control" id="hospitalSuxing">
                                                    <option value="">公立</option>
                                                    <option value="">私立</option>
                                                </select>
                                                <!--<input type="text" class="form-control" placeholder="dd/mm/yyyy"> </div>-->
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">折扣系数</label>
                                                <input type="number" class="form-control" placeholder="" id="zk">
                                                <!--<select class="form-control" data-placeholder="Choose a Category" tabindex="1">-->
                                                <!--<option value="Category 1">Category 1</option>-->
                                                <!--<option value="Category 2">Category 2</option>-->
                                                <!--<option value="Category 3">Category 5</option>-->
                                                <!--<option value="Category 4">Category 4</option>-->
                                                <!--</select>-->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="col-md-2 col-md-offset-2">
                                            <div class="form-group">
                                                <label class="control-label">付款方式</label>
                                                <select class="form-control" id="paymethod">
                                                    <option value="">方式1</option>
                                                    <option value="">方式2</option>
                                                </select>
                                                <!--<div class="radio-list">-->
                                                <!--<label class="radio-inline">-->
                                                <!--<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked> Option 1 </label>-->
                                                <!--<label class="radio-inline">-->
                                                <!--<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2"> Option 2 </label>-->
                                                <!--</div>-->
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">付款方式备注</label>
                                                <input type="text" id="paymethodMark" class="form-control" placeholder="付款方式备注">
                                                <!--<select class="form-control" data-placeholder="Choose a Category" tabindex="1">-->
                                                <!--<option value="Category 1">Category 1</option>-->
                                                <!--<option value="Category 2">Category 2</option>-->
                                                <!--<option value="Category 3">Category 5</option>-->
                                                <!--<option value="Category 4">Category 4</option>-->
                                                <!--</select>-->
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label class="control-label">付款周期</label>
                                                <select class="form-control" id="paymethodTime">
                                                    <option value="">方式1</option>
                                                    <option value="">方式2</option>
                                                </select>
                                                <!--<div class="radio-list">-->
                                                <!--<label class="radio-inline">-->
                                                <!--<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked> Option 1 </label>-->
                                                <!--<label class="radio-inline">-->
                                                <!--<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2"> Option 2 </label>-->
                                                <!--</div>-->
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">付款方式备注</label>
                                                <input type="text" id="paymethodTimemark" class="form-control" placeholder="付款方式备注">
                                                <!--<select class="form-control" data-placeholder="Choose a Category" tabindex="1">-->
                                                <!--<option value="Category 1">Category 1</option>-->
                                                <!--<option value="Category 2">Category 2</option>-->
                                                <!--<option value="Category 3">Category 5</option>-->
                                                <!--<option value="Category 4">Category 4</option>-->
                                                <!--</select>-->
                                            </div>
                                        </div>
                                    </div>
                                    <!--/row-->
                                    <h3 class="form-section">开票信息</h3>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>开票抬头</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>纳税人识别号</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>开票地址</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>开票电话</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>开户银行</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>开户行账号</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>


                                    <h3 class="form-section">收件人</h3>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>姓名</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>职务</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>电话</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>



                                    <h3 class="form-section">账单联系人</h3>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>姓名</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>职务</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>电话</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>邮箱</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>


                                    <h3 class="form-section">发票联系人</h3>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>姓名</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>职务</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>电话</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>地址</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>财务科电话</label>
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </form>
                        </div>
                        <div class="tab-pane" id="tab_15_2">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">营业执照</label>
                                        <div>
                                            <span class="btn btn-success fileinput-button">
                                                <i class="glyphicon glyphicon-plus"></i>
                                                <span>上传文件</span>
                                                <input id="fileupload1" type="file" name="files[]">
                                            </span>
                                            <br />
                                            <span id="files_preview1" class="files"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">

                                    <div class="form-group">
                                        <label class="control-label">医疗机构执业许可证</label>
                                        <div>
                                            <span class="btn btn-success fileinput-button">
                                                <i class="glyphicon glyphicon-plus"></i>
                                                <span>上传文件</span>
                                                <input id="fileupload2" type="file" name="files[]">
                                            </span>
                                            <br />
                                            <span id="files_preview2" class="files"></span>
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">其他证明文件</label>
                                        <div>
                                            <span class="btn btn-success fileinput-button">
                                                <i class="glyphicon glyphicon-plus"></i>
                                                <span>上传文件</span>
                                                <input id="fileupload3" type="file" name="files[]">
                                            </span>
                                            <br />
                                            <span id="files_preview3" class="files"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_15_3">
                            <div class="row">
                                <div class="col-md-12">
                                    <script id="container" name="content" type="text/plain" style="width: 1000px">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn green">保存</button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">关闭</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>



    @section referenceHeader{
        <link href="~/assets/global/plugins/umeditor/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
        <link href="~/assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" type="text/css" />
        
        <script>
            var pageUrl = "/Settings/HospitalList"
        </script>
    }


    @section scripts{

        <script src="~/assets/global/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/vendor/load-image.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/vendor/canvas-to-blob.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.iframe-transport.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-process.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-image.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-audio.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-video.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-validate.js" type="text/javascript"></script>
        <script src="~/assets/global/scripts/fileupload.js" type="text/javascript"></script>
        <script type="text/javascript" charset="utf-8" src="~/assets/global/plugins/umeditor/umeditor.config.js"></script>
        <script type="text/javascript" charset="utf-8" src="~/assets/global/plugins/umeditor/umeditor.min.js"></script>
        <script type="text/javascript" src="~/assets/global/plugins/umeditor/lang/zh-cn/zh-cn.js"></script>



        <!-- 实例化编辑器 -->
        <script type="text/javascript">
            $(function() {
                var um = UM.getEditor('container',
                    {
                    });
                $("#btnSearch").click(function () {
                    if ($("#Filter").val() == "") {
                        location.href = '@Url.Action("HospitalList")';
                        return;
                    }
                    var reloadUrlWithFilter = '@Url.Action("HospitalList")?filter=' + encodeURI($("#Filter").val());
                    location.href = reloadUrlWithFilter;
                });
            });
        </script>
    }
