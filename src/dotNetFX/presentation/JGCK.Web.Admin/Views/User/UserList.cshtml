@using Webdiyer.WebControls.Mvc
@using JGCK.Util
@model JGCK.Web.Admin.Models.VmUserStaffIndex
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <a href="#">基础管理</a>
            <i class="fa fa-circle"></i>
        </li>
        <li>
            <span>员工管理</span>
        </li>
    </ul>
    <div class="page-toolbar">
        <div class="btn-group pull-right">
            <button type="button" class="btn green btn-sm btn-outline"> 新增 </button>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN SAMPLE TABLE PORTLET-->
        <div class="portlet light">
            <div class="portlet-body">
                <div class="table-toolbar">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <!--<label>Small Input Default Group</label>-->
                                <div class="input-group input-group-sm">
                                    @Html.TextBoxFor(m => m.Filter, new { @class = "form-control", placeholder = "姓名、电话" })
                                    <span class="input-group-btn">
                                        <button id="btnSearch" class="btn green" type="button">搜索</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <style>
                        .ul-person li {
                            list-style: none;
                            float: left;
                            margin: 10px;
                        }

                            .ul-person li .item {
                                display: inline-block;
                                height: 50px;
                                color: #fff;
                                background-color: #ff8666;
                                padding: 15px;
                                border-radius: 5px !important;
                                overflow: hidden;
                            }
                    </style>
                    <table class="table table-striped table-bordered table-hover dataTable" id="sample_1">
                        <thead>
                            <tr>
                                <th class="sorting_asc"> 序号 </th>
                                <th class="sorting"> 角色 </th>
                                <th class="sorting_desc"> 所属部门 </th>
                                <th> 员工类型	 </th>
                                <th> 用户名 </th>
                                <th class="sorting"> 姓名 </th>
                                <th> 性别 </th>
                                <th> 学历 </th>
                                <th> 毕业学校 </th>
                                <th> 专业 </th>
                                <th> 联职电话 </th>
                                <th> 操作 </th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                if (Model != null && Model.ViewObjects != null)
                                {
                                    var itemIndex = 1;
                                    foreach (var item in Model.ViewObjects)
                                    {
                                        <tr>
                                            <td> @(Model.CurrentIndex * Model.PageSize + itemIndex) </td>
                                            <td> @item.NagigatedDomainObject.RealName </td>
                                            <td> @item.NagigatedDomainObject.DepartmentName </td>
                                            <td> @item.NagigatedDomainObject.PersonType.ToDescription() </td>
                                            <td> @item.NagigatedDomainObject.Name </td>
                                            <td> @item.NagigatedDomainObject.RealName </td>
                                            <td> @item.NagigatedDomainObject.Sex.ToDescription() </td>
                                            <td> @item.NagigatedDomainObject.Education.ToDescription() </td>
                                            <td> @item.NagigatedDomainObject.GraduateInstitution </td>
                                            <td> @item.NagigatedDomainObject.Major </td>
                                            <td> @item.NagigatedDomainObject.Phone </td>
                                            <td> <button type="button" class="btn green btn-sm" onclick="$('#modelfull').modal('show')" data-json="@(item.HiddenJsonString)"> 操作 </button> </td>
                                        </tr>
                                        itemIndex++;
                                    }
                                }
                            }
                        </tbody>
                    </table>

                    <div>
                        @Html.Pager(Model.TotalRecordCount, Model.PageSize, Model.CurrentIndex, new PagerOptions
                        {
                            PageIndexParameterName = "p",
                            ContainerTagName = "ul",
                            CssClass = "pagination pagination-sm",
                            CurrentPagerItemTemplate = "<li class=\"active\"><a href=\"javascript:; \"> {0} </a></li>",
                            DisabledPagerItemTemplate = "<li><a href=\"javascript:; \"> {0} </a></li>",
                            PagerItemTemplate = "<li>{0}</li>"
                        })
                    </div>
                </div>
            </div>
            <!-- END SAMPLE TABLE PORTLET-->
        </div>
    </div>
</div>
@section scripts
{
    <script>
        $(function() {
            $("#btnSearch").click(function () {
                if ($("#Filter").val() == "") {
                    location.href = '@Url.Action("UserList")';
                    return;
                }
                var reloadUrlWithFilter = '@Url.Action("UserList")?filter=' + encodeURI($("#Filter").val());
                location.href = reloadUrlWithFilter;
            });
        })
    </script>
}